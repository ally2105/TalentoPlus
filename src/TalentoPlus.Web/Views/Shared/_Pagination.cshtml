@model TalentoPlus.Web.Models.PaginationViewModel

@{
    var currentPage = Model.CurrentPage;
    var totalPages = Model.TotalPages;
    var pageSize = Model.PageSize;
    var totalCount = Model.TotalCount;
    var actionName = Model.ActionName ?? "Index";
    var controllerName = Model.ControllerName;
    var searchTerm = Model.SearchTerm;
    
    var startRecord = totalCount > 0 ? ((currentPage - 1) * pageSize) + 1 : 0;
    var endRecord = Math.Min(currentPage * pageSize, totalCount);
}

@if (totalCount > 0)
{
    <div class="row align-items-center">
        <div class="col-md-6">
            <small class="text-muted">
                Mostrando <strong>@startRecord</strong> a <strong>@endRecord</strong> de <strong>@totalCount</strong> registros
            </small>
        </div>
        <div class="col-md-6">
            @if (totalPages > 1)
            {
                <nav aria-label="Navegación de páginas">
                    <ul class="pagination pagination-sm justify-content-end mb-0">
                        <!-- Primera página -->
                        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                            <a class="page-link" href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = 1, pageSize = pageSize })" aria-label="Primera">
                                <i class="fas fa-angle-double-left"></i>
                            </a>
                        </li>
                        
                        <!-- Anterior -->
                        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                            <a class="page-link" href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = currentPage - 1, pageSize = pageSize })" aria-label="Anterior">
                                <i class="fas fa-angle-left"></i>
                            </a>
                        </li>

                        @{
                            var startPage = Math.Max(1, currentPage - 2);
                            var endPage = Math.Min(totalPages, currentPage + 2);
                            
                            // Ajustar para mostrar siempre 5 páginas si es posible
                            if (endPage - startPage < 4)
                            {
                                if (startPage == 1)
                                {
                                    endPage = Math.Min(totalPages, startPage + 4);
                                }
                                else if (endPage == totalPages)
                                {
                                    startPage = Math.Max(1, endPage - 4);
                                }
                            }
                        }

                        <!-- Números de página -->
                        @for (int i = startPage; i <= endPage; i++)
                        {
                            <li class="page-item @(i == currentPage ? "active" : "")">
                                <a class="page-link" href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = i, pageSize = pageSize })">@i</a>
                            </li>
                        }

                        <!-- Siguiente -->
                        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
                            <a class="page-link" href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = currentPage + 1, pageSize = pageSize })" aria-label="Siguiente">
                                <i class="fas fa-angle-right"></i>
                            </a>
                        </li>

                        <!-- Última página -->
                        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
                            <a class="page-link" href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = totalPages, pageSize = pageSize })" aria-label="Última">
                                <i class="fas fa-angle-double-right"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            }
        </div>
    </div>
    
    <!-- Selector de tamaño de página -->
    @if (totalCount > 10)
    {
        <div class="row mt-3">
            <div class="col-12">
                <div class="d-flex align-items-center justify-content-center gap-2">
                    <small class="text-muted">Registros por página:</small>
                    <div class="btn-group btn-group-sm" role="group">
                        @foreach (var size in new[] { 5, 10, 25, 50, 100 })
                        {
                            <a href="@Url.Action(actionName, controllerName, new { searchTerm = searchTerm, pageNumber = 1, pageSize = size })" 
                               class="btn btn-outline-primary @(pageSize == size ? "active" : "")">
                                @size
                            </a>
                        }
                    </div>
                </div>
            </div>
        </div>
    }
}
else
{
    <p class="text-muted text-center mb-0">No hay registros para mostrar</p>
}
